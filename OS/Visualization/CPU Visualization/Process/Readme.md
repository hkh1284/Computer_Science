# 프로세스
### 프로세스의 정의
### 프로세스 API
### 프로세스 상태
### 프로세스 관리
### Limited Direct Execution


## 프로세스의 정의
  #### 1. 수행중인 프로그램
  #### 2. 스케줄링 객체이다. -> 즉, cpu를 차지한다
  #### 3. 자신의 메모리를 갖는다. -> 메인메모리상에 자신의 부분을 가지고 있다.
  

## 프로그램 vs 프로세스
  #### 프로그램
  - 살아있지 않고 디스크 상에 존재하는 객체. 
  - 유저가 더블클릭할 때까지 움직이지 않는 수동적(passive) 객체
  #### 프로세스
  - cpu위에서 살아움직이는 객체
  - 유저가 더블클릭한 프로그램이 살아움직이면 그것을 프로세스라고 한다.
  - 능동적(active) 객체
  
## 프로세스 API (프로세스와 관련된 시스템콜)
  #### 1. fork()
  - 새로운 프로세스를 만드는 시스템콜
  - fork()의 리턴밸류 : 자식프로세스는 0, 부모프로세스는 자식프로세스의 pid
  - 제어의 흐름이 두개가 되므로 누가 먼저 수행될지 알 수 없다.(non-deterministic하다)
  #### 2. wait()
  - wait()를 호출한 프로세스가 잠시 멈추도록 만드는 시스템콜
  - non-deterministic문제를 해결하기 위해(=개발자가 프로세스실행순서를 제어하기 위해서) 필요
  #### 3. exec()
  - 
  #### 4. 기타등등
  - getpid(), kill(), signal(), ....

## 프로세스 상태
  #### 프로그램
  - 살아있지 않고 디스크 상에 존재하는 객체. 
  - 유저가 더블클릭할 때까지 움직이지 않는 수동적(passive) 객체
  #### 프로세스
  - cpu위에서 살아움직이는 객체
  - 유저가 더블클릭한 프로그램이 살아움직이면 그것을 프로세스라고 한다.
  - 능동적(active) 객체
  
## 프로세스 관리
  #### 1. fork()
  - 새로운 프로세스를 만드는 시스템콜
  - fork()의 리턴밸류 : 자식프로세스는 0, 부모프로세스는 자식프로세스의 pid
  - 제어의 흐름이 두개가 되므로 누가 먼저 수행될지 알 수 없다.(non-deterministic하다)
  #### 2. wait()
  - wait()를 호출한 프로세스가 잠시 멈추도록 만드는 시스템콜
  - non-deterministic문제를 해결하기 위해(=개발자가 프로세스실행순서를 제어하기 위해서) 필요
  #### 3. exec()
  - 
  #### 4. 기타등등
  - getpid(), kill(), signal(), ....
  
## Limited Direct Execution 제한된 직접 수행
  #### 1. time sharing 시분할
  - cpu가상화의 핵심기술
  - 시분할 기법 도입에는 두가지 이슈가 있다. : 성능, 제어
  - 성능 : 수행을 멈추고 다시 시작하는 cpu를 가상화하는데 드는 부하를 최소화시켜야함
  - 제어 : a프로세스가 cpu를 조금 사용하고 b프로세스로 넘겨야한다. 이것을 os가 개입해 관리해야함.
  #### 2. Direct Execution 직접수행
  - 직접수행 : 한 프로그램이 시작되면 다른 간섭을 받지 않고 끝날 때까지 계속 수행되는 것.
  - 이 방법은 시분할 이슈 중 성능은 좋아지지만, 제어면에선 문제가 있다.
  - 제어 측면의 문제 : 특정 프로그램이 리턴되지 않으면 끝나지 않아서 cpu를 계속 독점할 수도 있음
  - 제어 측면의 문제를 해결하기 위해, 직접 수행 방식을 일부 제한하는 '제한된 직접 수행 방식'을 사용
  #### 3. 제한된 직접 수행을 만드는 첫번째 방법 : Restricted operation 제한된 명령어 사용
  - 특권명령어(or 제한된 오퍼레이션) 
  : 잘 정의된 인터페이스(시스템콜)을 통해서만 수행할 수 있는 몇몇 연산들
  - 유저모드에서 특권명령어 수행 시, 프로텍션 폴트 발생. 커널모드에서 수행 시, 잘 수행됨
  - 모드 스위치 : 유저모드 <-> 커널모드를 바꾸는 것. 모드 스위치를 할 때 trap사용
  - 특권명령어(=제한된 명령어)를 사용해 mode switch를 사용하게 하는 방법
  #### 4. 제한된 직접 수행을 만드는 두번째 방법 : context switch with timer interrupt
  - 타이머 인터럽트를 기반으로 한 문맥교환
  - context 문맥 : 한 프로세스가 수행을 멈추었다가 다음에 다시 수행될 때 필요한 모든 정보들
  - context switch 문맥교환 : context save + context restore
  - context save할 때 어디에 save되는가? : pcb 자료구조에서 context부분에 

